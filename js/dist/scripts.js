const count=1292;let limit=100,loadMore=document.querySelector(".loadMoreButton"),pokemonRepository=function(){let e=[];function t(t){"object"==typeof t&&"name"in t&&"detailsUrl"in t?e.push(t):console.log("wrong data type")}function o(){return e}function n(e){return fetch(e.detailsUrl).then(function(e){return e.json()}).then(function(t){e.imageUrl=t.sprites.front_default,e.imageUrlBack=t.sprites.back_default,e.height=t.height,e.types=t.types,e.abilities=t.abilities}).catch(function(e){console.error(e)})}function i(e){n(e).then(function(){!function e(t){let o=document.querySelector(".modal-body"),n=document.querySelector(".modal-title");document.querySelector(".modal-header");let i="";t.abilities.forEach(function(e){i+='<span class = "pokemonAbility">'+e.ability.name+"</span> "});let l=`Abilities: ${i}`,s="";t.types.forEach(function(e){s+='<span class = "pokemonTypes">'+e.type.name+"</span> "});let a=`Types: ${s}`,r=document.createElement("h1");r.innerText=t.name;let c=document.createElement("img");c.src=t.imageUrl;let d=document.createElement("p");d.innerText=`Height: ${t.height}`;let u=document.createElement("p");u.innerHTML=l;let p=document.createElement("p");if(p.innerHTML=a,n.appendChild(r),o.appendChild(c),t.imageUrlBack){let m=document.createElement("img");m.src=t.imageUrlBack,o.appendChild(m)}o.appendChild(d),o.appendChild(u),o.appendChild(p)}(e)})}return{add:t,getAll:o,addListItem:function e(t){let o=document.querySelector(".pokemon-list"),n=document.createElement("li");n.classList.add("list-group-item"),n.classList.add("col-12"),n.classList.add("col-sm-6"),n.classList.add("col-md-4"),n.classList.add("col-xl-3");let l=document.createElement("button");l.innerText=t.name,l.classList.add("btn"),l.classList.add(["color1Button","color2Button","color3Button","color4Button","color5Button","color6Button"][Math.floor(6*Math.random())]),l.classList.add("btn-block"),l.setAttribute("data-toggle","modal"),l.setAttribute("data-target","#exampleModal"),n.appendChild(l),o.appendChild(n),function e(t,o){o.addEventListener("click",function(){document.querySelector(".modal-body").innerHTML="",document.querySelector(".modal-title").innerHTML="",i(t)})}(t,l)},loadDetails:n,showDetails:i,loadList:function e(o,n){return fetch("https://pokeapi.co/api/v2/pokemon/?offset="+o+"&limit="+n).then(function(e){return e.json()}).then(function(e){e.results.forEach(function(e){t({name:e.name,detailsUrl:e.url})})}).catch(function(e){console.error(e)})}}}();function showNumberDisplayedPokemons(){let e=document.querySelector("#displayNumberPokemons"),t=document.querySelector("#showNumberInNavbar"),o=pokemonRepository.getAll().length;e.innerText=`${o} pokemons of 1292 shown`,t.innerText=`${o} pokemons of 1292 loaded`}pokemonRepository.loadList(0,limit).then(function(){pokemonRepository.getAll().forEach(function(e){pokemonRepository.addListItem(e)}),showNumberDisplayedPokemons()}),loadMore.addEventListener("click",function(){let e=pokemonRepository.getAll().length,t;t=e+limit<=1292?limit:1292-e,pokemonRepository.loadList(e,t).then(function(){pokemonRepository.getAll().slice(e).forEach(function(e){pokemonRepository.addListItem(e)}),showNumberDisplayedPokemons(),1292===pokemonRepository.getAll().length&&loadMore.classList.add("invisible")})});let backToListButton=document.querySelector(".backToList"),loadMoreButton=document.querySelector(".loadMoreButton"),inputField=document.querySelector("input");function hideBackToListButton(){loadMoreButton.classList.contains("invisible")&&pokemonRepository.getAll().length<1292&&loadMoreButton.classList.remove("invisible"),backToListButton.classList.contains("invisible")||backToListButton.classList.add("invisible")}function showBackToListButton(){backToListButton.classList.contains("invisible")&&backToListButton.classList.remove("invisible"),loadMoreButton.classList.contains("invisible")||loadMoreButton.classList.add("invisible")}function searchPage(){let e=inputField.value.toUpperCase(),t=pokemonRepository.getAll().length;""!==e&&(document.querySelector(".pokemon-list").innerHTML="",document.querySelector("#displayNumberPokemons").innerText="searched within "+t+" pokemons",pokemonRepository.getAll().forEach(function(t){t.name.toUpperCase().indexOf(e)>=0&&pokemonRepository.addListItem(t)}),""===document.querySelector(".pokemon-list").innerHTML?document.querySelector(".displayInfoText").innerText="no pokemon found":document.querySelector(".displayInfoText").innerText="click on pokemon name to show more details"),showBackToListButton()}document.querySelector(".searchButton").addEventListener("click",function(e){e.preventDefault(),searchPage()}),inputField.addEventListener("keydown",function(e){"Enter"===e.key&&(e.preventDefault(),searchPage())}),backToListButton.addEventListener("click",function(e){document.querySelector(".pokemon-list").innerHTML="",document.querySelector(".displayInfoText").innerText="click on Pokemon name to show more details +++ scroll down and click load more to show more pokemons",pokemonRepository.getAll().forEach(function(e){pokemonRepository.addListItem(e)}),showNumberDisplayedPokemons(),hideBackToListButton()});